---
title: "Lab 5 - Probability and Simpson's Paradox"
categories: "Lab"
execute:
  eval: true
---

::: callout-important
This lab is due October 24th at 11:59pm.
:::

# Learning Goals

-- Calculate single event, conditional, and "and" probabilities

-- Interpret probabilities in the context of the problem 

-- Display a fundemental understanding of Simpson's Paradox 

```{r}
library(tidyverse)
```


```{r}
heart_disease <- heart_disease %>%
  mutate(
    high_risk_names = if_else(high_risk == "1", "High risk", "Not high risk"),
    education_names = case_when(
      education == "1" ~ "Some high school",
      education == "2" ~ "High school or GED",
      education == "3" ~ "Some college or vocational school",
      education == "4" ~ "College"
    ),
    education_names = fct_relevel(education_names, "Some high school", "High school or GED", "Some college or vocational school", "College")
  )
```



## Exercise 2 

Bike sharing systems are new generation of traditional bike rentals where whole process from membership, rental and return back has become automatic. You are tasked to investigate the relationship between the temperature outside and the number of bikes rented in the Washington DC area between the years 2011 and 2022. You will be investigating data for the months June, July, September, and November. 

(a) Read in the data. Then, create a scatter plot that investigates the relationship between the number of bikes rented and the temperature outside. Include a straight line of best fit to help discuss the discovered relationship. Summarize your findings in 2-3 sentences.


```{r}
bike <- read_csv("labs/data/bike.csv")

month <- c("11", "9" , "6" , "7")

bike <- bike |>
  mutate(mnth = as.factor(mnth)) |>
  filter(mnth %in% month)
```

```{r}

bike |>
  ggplot(aes(y = cnt, x = temp)) +
  geom_point() + 
  geom_smooth(method = "lm" , se = FALSE) + 
  labs(
    title = "Relationsip Between Bikes Rented and Temperatue" , 
    subtitle = "Washington DC 2011-2012", 
    x = "Temperature" , 
    y = "Bikes Rented"
  )

```

(b) Another researcher suggests to look at the relationship between bikes rented and temperature by each of the four months of interest. Recreate your plot in part a, and color the points by month. Include a straight line for each of the four months to help discuss each month's relationship between bikes rented and temperature. In 3-4 sentences, summarize your findings. 

```{r}
bike |>
  mutate(mnth = as.factor(mnth)) |>
  ggplot(aes(y = cnt, x = temp, color = mnth)) +
  geom_point() + 
  geom_smooth(method = "lm" , se = FALSE) + 
    labs(
    title = "Relationsip Between Bikes Rented and Temperatue By Month" , 
    subtitle = "Washington DC 2011-2012", 
    x = "Temperature" , 
    y = "Bikes Rented",
    color = "Month"
  )

```

Please watch the following video on Simpson's Paradox [here](https://www.youtube.com/watch?v=ebEkn-BiW5k). After you do, please answer the following questions. 

(c) In your own words, summarize Simpson's Paradox in 2-3 sentences. 


(d) Compare and contrast your findings from part a and part b. What's different? 


(e) Think critically about your answer to part d. What other context from this study could be creating this paradox? That is, identify a potential confounding variable in this study. Be sure to justify how your example could be a potential confounding variable by relating it back to both bike rentals and temperature. 

